{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Practica 2.4","text":""},{"location":"#introduccion","title":"Introduccion","text":"<p>En esta practica vamos a configurar un servidor Proxy para el balanceo de peticiones, primero clonamos la m\u00e1quina de Debian donde tenemos, configurado nuestro servidor web de las pr\u00e1cticas anteriores, de esa forma tendremos 2 servidores web, y ademas del anterior que clonamos par el proxy.</p>"},{"location":"#ajustar-el-nuevo-servidor-web-webserver2","title":"Ajustar el nuevo servidor web (webserver2)","text":""},{"location":"#primero-vamos-a-cambiarle-el-nombre-al-archivo-de-conf-en-etcnginxsites-available-a-webserver2","title":"Primero vamos a cambiarle el nombre al archivo de conf en <code>/etc/nginx/sites-available</code> a <code>webserver2</code>","text":""},{"location":"#luego-le-quitamos-el-link-simbolico-anterior-y-lo-volvemos-a-crear","title":"Luego le quitamos el link simbolico anterior y lo volvemos a crear:","text":""},{"location":"#y-ahora","title":"Y ahora:","text":""},{"location":"#verificamos-la-sintaxis-con-el-comando","title":"Verificamos la sintaxis con el comando:","text":"<pre><code>sudo nginx -t\n</code></pre>"},{"location":"#reiniciamos-el-servicio-de-nginx-con-el-comando","title":"Reiniciamos el servicio de <code>nginx</code> con el comando:","text":"<pre><code>sudo systemctl restart nginx\n</code></pre>"},{"location":"#modificamos-su-configuracion","title":"Modificamos su configuracion:","text":""},{"location":"#le-ponemos-el-puerto-9090-y-la-cabezera-webserver2","title":"Le ponemos el puerto <code>9090</code>, y la cabezera <code>webserver2</code>","text":""},{"location":"#configurar-el-proxy","title":"Configurar el <code>PROXY</code>:","text":""},{"location":"#le-cambiamos-el-nombre-a-su-archivo-de-conf-en-etcnginxsites-available-por-balanceo-y-le-quitamos-el-link-simbolico","title":"Le cambiamos el nombre a su archivo de conf en <code>/etc/nginx/sites-available</code> por <code>balanceo</code> y le quitamos el link simbolico:","text":""},{"location":"#creamos-el-nuevo-link-simbolico-con-el-nuevo-nombre-y-mostramos-el-resultado","title":"Creamos el nuevo link simbolico con el nuevo nombre y mostramos el resultado:","text":""},{"location":"#configuramos-el-archivo-de-configuracion-balanceo-para-que-pueda-distribuir-las-peticiones-aleatoriamente","title":"Configuramos el archivo de configuracion <code>balanceo</code> para que pueda distribuir las peticiones aleatoriamente:","text":"<ul> <li> <p><code>random</code>: Para elegir un server aleatoriamente de los indicados, en este caso son las IPs de webserver y webserver2.</p> </li> <li> <p><code>proxy_pass</code>: Para dirigir las peticiones a <code>backend_hosts</code> que se encarga de elegir aleatoriamente uno de los servidores.</p> </li> </ul>"},{"location":"#hosts-anfitrion","title":"Hosts Anfitrion","text":""},{"location":"#ahora-ya-ponemos-la-ip-del-proxy-en-el-hosts-de-windows-que-se-encuentra-en","title":"Ahora ya ponemos la ip del <code>PROXY</code> en el hosts de windows que se encuentra en:","text":"<pre><code>    C:\\Windows\\System32\\drivers\\etc\\hosts\n</code></pre>"},{"location":"#navegador","title":"Navegador","text":""},{"location":"#nos-metemos-en-el-navegador-de-la-maquina-anfitriona-y-hacemos-una-peticion-al-proxy-de-balanceo","title":"Nos metemos en el navegador de la maquina anfitriona y hacemos una peticion al proxy de balanceo.","text":""},{"location":"#fijamos-en-las-cabeceras-host-se-aprecia-que-la-primera-indica-webserver2-y-la-segunda-indica-balanceo-los-cuales-son-los-que-hemos-puesto-en-la-configuracion-de-ambos","title":"Fijamos en las cabeceras <code>Host</code> se aprecia que la primera indica <code>webserver2</code>, y la segunda indica <code>balanceo</code>. Los cuales son los que hemos puesto en la configuracion de ambos.","text":""},{"location":"#se-ve-que-el-proxyha-dirigido-la-peticion-aleatoriamente-al-webserver2","title":"Se ve que el <code>PROXY</code>ha dirigido la peticion aleatoriamente al <code>webserver2</code>.","text":""},{"location":"#mandamos-otra-peticion-al-proxy-y-pinchamos-f12","title":"Mandamos otra peticion al <code>PROXY</code> y pinchamos <code>F12</code>.","text":""},{"location":"#nos-metemos-en-la-seccion-de-network-vara-visualizar-las-cabezeras-de-la-respuesta","title":"Nos metemos en la seccion de <code>Network</code> vara visualizar las cabezeras de la respuesta.","text":""},{"location":"#y-ahora-se-nota-que-esta-vez-el-proxy-a-dirigido-la-peticion-a-webserver","title":"Y ahora se nota que esta vez el <code>PROXY</code> a dirigido la peticion a <code>webserver</code>.","text":""}]}